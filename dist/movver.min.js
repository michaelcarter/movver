!function t(e,o,n){function r(l,s){if(!o[l]){if(!e[l]){var u="function"==typeof require&&require;if(!s&&u)return u(l,!0);if(i)return i(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var h=o[l]={exports:{}};e[l][0].call(h.exports,function(t){var o=e[l][1][t];return r(o?o:t)},h,h.exports,t,e,o,n)}return o[l].exports}for(var i="function"==typeof require&&require,l=0;l<n.length;l++)r(n[l]);return r}({1:[function(){!function(){function t(t){t||(t={}),t.touchAverage&&(this.MAX_TOUCH_OFFSETS=t.touchAverage),t.focusThreshold&&(this.FOCUS_PERCENTAGE_THRESHOLD=t.focusThreshold),t.eventTimeout&&(this.EVENT_TIMEOUT=t.eventTimeout),t.mobileThreshold&&(this.MOBILE_THRESHOLD=t.mobileThreshold),t.debug&&(this.DEBUG=!0),this.DEBUG&&(document.body.innerHTML+='<div id="thumbArea" style="background:rgba(255,0,0,0.5); position:fixed; width:100%; z-index:1;"></div>'),this._addListeners()}return t.prototype.watchedElements=[],t.prototype.touchStartOffsets=[],t.prototype.touchEndOffsets=[],t.prototype.elementTimeouts=[],t.prototype.viewableLowerBoundary=Math.max(document.documentElement.clientHeight,window.innerHeight||0),t.prototype.pollScrollCount=0,t.prototype.MAX_TOUCH_OFFSETS=2,t.prototype.FOCUS_PERCENTAGE_THRESHOLD=70,t.prototype.DEBUG=!1,t.prototype.EVENT_TIMEOUT=1e3,t.prototype.MOBILE_THRESHOLD=490,t.prototype.watch=function(t){if("object"!=typeof t)throw new Error("Element must be an object.");this.watchedElements.push(t)},t.prototype.unwatch=function(t){if("object"!=typeof t)throw new Error("Element must be an object.");var e=this.watchedElements.indexOf(t);return e>-1?(this.watchedElements.splice(e,1),!0):!1},t.prototype._arrayAverage=function(t){var e=t.reduce(function(t,e){return t+e});return e/t.length},t.prototype._calculateFocusPercentage=function(t){var e=t.getBoundingClientRect(),o=(e.top+e.bottom)/2,n=o/(this.viewableLowerBoundary/2)*100;return n>100&&(n=200-n),0>n?0:n},t.prototype._findElementTimeout=function(t){for(var e=0;e<this.elementTimeouts.length;e++)if(t===this.elementTimeouts[e].element)return this.elementTimeouts[e];return null},t.prototype._elementTimeoutExists=function(t){return!!this._findElementTimeout(t)},t.prototype._clearElementTimeout=function(t){var e=this._findElementTimeout(t),o=this.elementTimeouts.indexOf(e);return e&&window.clearTimeout(e.timeout),o>-1&&this.elementTimeouts.splice(o,1),!!e},t.prototype._onMobile=function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)/window.devicePixelRatio<=this.MOBILE_THRESHOLD},t.prototype._scrollOffset=function(){return self.pageYOffset?self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body?document.body.scrollTop:void 0},t.prototype._pollScroll=function(){this.scrollPoller&&(t.pollScrollCount=0,t.lastScrollOffset=-1,window.clearInterval(t.scrollPoller),t.scrollPoller=!1);var t=this;this.scrollPoller=window.setInterval(function(){t.pollScrollCount+=1;var e=t._scrollOffset();t.lastScrollOffset===e||t.pollScrollCount>=50?(t.pollScrollCount=0,t.lastScrollOffset=-1,window.clearInterval(t.scrollPoller),t.scrollPoller=!1):(t._updateFocus(),t.lastScrollOffset=e,t.pollScrollCount+=1)},100)},t.prototype._updateFocus=function(){var t=this;this.watchedElements.forEach(function(e){var o=t._calculateFocusPercentage(e),n=t._elementTimeoutExists(e);o>=t.FOCUS_PERCENTAGE_THRESHOLD&&!n?t.elementTimeouts.push({element:e,timeout:window.setTimeout(function(){e.dispatchEvent(new Event("movver"))},t.EVENT_TIMEOUT)}):o<t.FOCUS_PERCENTAGE_THRESHOLD&&n&&t._clearElementTimeout(e),t.DEBUG&&t._fillRect(e,o)})},t.prototype._fillRect=function(t,e){var o=2.55*e;t.style.backgroundColor="rgb(0,"+Math.round(o)+",0)"},t.prototype._setVisibleBounds=function(){var t=document.getElementById("thumbArea");t.style.top=this.viewableLowerBoundary+"px",t.style.height=document.documentElement.clientHeight-this.viewableLowerBoundary+100+"px"},t.prototype._onTouchStart=function(t){this._onMobile()&&(this.touchStartOffsets.push(t.touches[0].pageY-t.view.scrollY),this.touchStartOffsets.length>this.MAX_TOUCH_OFFSETS&&this.touchStartOffsets.shift(),this._pollScroll())},t.prototype._onTouchEnd=function(t){this._onMobile()&&(this.touchEndOffsets.push(t.changedTouches[0].pageY-t.view.scrollY),this.touchEndOffsets.length>this.MAX_TOUCH_OFFSETS&&this.touchEndOffsets.shift(),this.viewableLowerBoundary=Math.min(Math.round(this._arrayAverage(this.touchEndOffsets)),Math.round(this._arrayAverage(this.touchStartOffsets))),this.DEBUG&&this._setVisibleBounds())},t.prototype._addListeners=function(){document.addEventListener("touchstart",this._onTouchStart.bind(this)),document.addEventListener("touchend",this._onTouchEnd.bind(this))},t}()},{}]},{},[1]);
//# sourceMappingURL=movver.min.js.map